<div class="bg-gray-700 w-full" appScrollManager>
  <app-auth (value)="onUsernameChange($event)"></app-auth>
  <app-calendar *ngIf="signalRService.hourPerDate()"
                #calendarElement
                appScrollSection="calendar"
                appScrollAnchor="timeTable"
  ></app-calendar>
  @if (tiles?.length > 0) {
    <mat-grid-list
      [cols]="colsAmount"
      rowHeight="fit"
      style="height: 100vh"
      appScrollSection="timeTable"
    >
      @for (tile of tiles; track tile.id) {
        <mat-grid-tile [colspan]="tile.cols" [rowspan]="tile.rows">
          @if (tile.cellType == CellType.X) {
            <div
              appScrollAnchor="calendar"
              class="flex items-end pl-1 justify-around text-right w-full h-full bg-ceruleen-moyen text-terre-ombre-brule cursor-n-resize hover:bg-opacity-95"
            >
              <div class="flex flex-col md:flex-row">
                <mat-icon>calendar_month</mat-icon>
                <mat-icon>stat_2</mat-icon>
              </div>
              <div class="pr-1">
                {{ tile.text }}
              </div>
            </div>
          } @else if (tile.cellType == CellType.COLUMN_HEADER) {
            <div class="flex flex-col place-items-center place-content-end w-full h-full text-terre-ombre-brule bg-ceruleen-moyen">
              <mat-icon class="text-terre-ombre-brule" (click)="clickSubjectIcon($event, tile.subject)">{{tile.subject.icon}}</mat-icon>
              <div
                (click)="clickMachineColumn($event, tile.subject)"
                class="hover:bg-opacity-5 cursor-s-resize"
              >
                {{ tile.text }}
              </div>
            </div>
          }
          @if (tile.cellType == CellType.ROW_HEADER) {
            <app-hour-header
              [hour]="tile.hour"
              (click)="clickHourHeader($event, tile.hour)"
              class="w-full h-full justify-items-center bg-vert-59 text-white text-right hover:bg-opacity-50 cursor-e-resize"
            ></app-hour-header>
          } @else if (tile.cellType == CellType.HOUR) {
            <app-hour
              [hour]="tile.hour"
              [user]="laundryUser()"
              (selected)="onHourSelected($event, tile)"
              class="w-full h-full"
            >
            </app-hour>
          }
        </mat-grid-tile>
      }
    </mat-grid-list>
  }
</div>
